<!DOCTYPE html>
<html lang="pt-BR" prefix="og: https://ogp.me/ns#" itemscope itemtype="https://schema.org/WebPage">
<head>
    <!-- 1. META TAGS ESSENCIAIS PARA PERFORMANCE -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
    
    <!-- 2. SEO OTIMIZADO -->
    <title>Ozoxx | Acesso Exclusivo a Produtos Premium para Sa√∫de e Bem-Estar</title>
    
    <meta name="description" content="Acesso exclusivo Ozoxx. Produtos premium para sa√∫de, qualidade de vida e bem-estar. Cadastre-se para conte√∫do especial.">
    <meta name="keywords" content="ozoxx, produtos sa√∫de, bem-estar, qualidade de vida, terapia, sa√∫de, produtos premium">
    <meta name="author" content="Ozoxx">
    <meta name="robots" content="index, follow, max-image-preview:large">
    <meta name="theme-color" content="#667eea">
    
    <!-- 3. OPEN GRAPH PARA REDES SOCIAIS -->
    <meta property="og:title" content="Ozoxx | Acesso Exclusivo a Produtos Premium">
    <meta property="og:description" content="Cadastre-se para acessar conte√∫dos exclusivos sobre sa√∫de e bem-estar">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://seusite.com">
    <meta property="og:image" content="https://seusite.com/og-image.jpg">
    <meta property="og:image:alt" content="Ozoxx - Produtos Premium">
    <meta property="og:locale" content="pt_BR">
    
    <!-- 4. TWITTER CARDS -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Ozoxx | Acesso Exclusivo">
    <meta name="twitter:description" content="Conte√∫do exclusivo sobre sa√∫de e bem-estar">
    
    <!-- 5. PRE-CONNECT PARA PERFORMANCE -->
    <link rel="preconnect" href="https://script.google.com" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
    <link rel="dns-prefetch" href="https://script.google.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    
    <!-- 6. GTM OTIMIZADO PARA VELOCIDADE (SEM BLOQUEIO) -->
    <!-- Google Tag Manager -->
    <script>
    (function(w,d,s,l,i){
        // Detec√ß√£o de conex√£o lenta
        var isSlowConnection = navigator.connection ? 
            (navigator.connection.saveData || 
             navigator.connection.effectiveType === 'slow-2g' || 
             navigator.connection.effectiveType === '2g') : false;
        
        // Estrat√©gia de carregamento baseada na conex√£o
        var loadStrategy = isSlowConnection ? 'lazy' : 'delayed';
        var loadDelay = isSlowConnection ? 4000 : 2000;
        
        // Carrega GTM apenas ap√≥s intera√ß√£o ou tempo espec√≠fico
        function loadGTM() {
            if(w[l] && w[l].start) return; // J√° carregou
            
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),
                dl=l!='dataLayer'?'&l='+l:'';
            
            j.async=true;
            j.defer=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            
            // Error handling silencioso
            j.onerror = function() {
                console.warn('GTM: Carregamento n√£o cr√≠tico falhou');
            };
            
            if(f && f.parentNode){
                f.parentNode.insertBefore(j,f);
            } else {
                d.head.appendChild(j);
            }
        }
        
        // Estrat√©gia de carregamento
        if(loadStrategy === 'lazy') {
            // Para conex√µes lentas: carrega ap√≥s 4s ou na intera√ß√£o
            setTimeout(loadGTM, loadDelay);
            
            // Carrega na primeira intera√ß√£o
            ['click', 'touchstart', 'keydown', 'scroll'].forEach(function(event) {
                w.addEventListener(event, function handler() {
                    loadGTM();
                    w.removeEventListener(event, handler, {passive: true});
                }, {passive: true, once: true});
            });
        } else {
            // Conex√µes boas: carrega ap√≥s 2s
            w.addEventListener('load', function() {
                setTimeout(loadGTM, loadDelay);
            });
        }
        
        // Fallback: carrega antes de sair
        w.addEventListener('beforeunload', function() {
            if(!w[l] || !w[l].start) {
                loadGTM();
            }
        });
        
    })(window,document,'script','dataLayer','GTM-XXXXXX');
    </script>
    <!-- End Google Tag Manager -->
    
    <!-- 7. SCHEMA MARKUP OTIMIZADO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Ozoxx Acesso Exclusivo",
        "description": "P√°gina de acesso exclusivo para produtos premium de sa√∫de e bem-estar",
        "publisher": {
            "@type": "Organization",
            "name": "Ozoxx",
            "url": "https://seusite.com",
            "logo": "https://seusite.com/logo.png"
        },
        "mainEntity": {
            "@type": "Service",
            "serviceType": "Produtos de Sa√∫de",
            "description": "Acesso exclusivo a produtos premium para sa√∫de e qualidade de vida"
        }
    }
    </script>
    
    <!-- 8. CSS CR√çTICO INLINE (OTIMIZADO) -->
    <style>
        /* CRITICAL CSS - RENDERIZA√á√ÉO IMEDIATA */
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen-Sans,Ubuntu,Cantarell,'Helvetica Neue',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}.gate-container{background:#fff;border-radius:10px;padding:clamp(20px,5vw,40px);box-shadow:0 10px 40px rgba(0,0,0,.2);max-width:min(500px,90vw);width:100%;animation:fadeIn .5s ease-out}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        
        /* CONTENT VISIBLE IMMEDIATELY */
        h1{color:#333;font-size:clamp(1.5rem,4vw,2rem);margin-bottom:10px;text-align:center;line-height:1.2}.subtitle{color:#666;text-align:center;margin-bottom:30px;font-size:clamp(.9rem,2.5vw,1.1rem);line-height:1.4}
        
        /* FORM STYLES */
        .form-group{margin-bottom:20px}input{width:100%;padding:14px;border:2px solid #e1e1e1;border-radius:6px;font-size:16px;min-height:52px;transition:border-color .3s}input:focus{border-color:#667eea;outline:0}button{width:100%;padding:16px;background:linear-gradient(135deg,#667eea 0%,#764ba2);color:#fff;border:0;border-radius:6px;font-size:1rem;cursor:pointer;min-height:52px;font-weight:600;transition:opacity .3s}button:disabled{opacity:.7;cursor:not-allowed}.privacy{font-size:.75rem;color:#888;text-align:center;margin-top:25px;line-height:1.5}#errorMsg{display:none;color:#d00;padding:12px;margin-top:15px;border:1px solid #fcc;background:#fee;border-radius:6px}#loading{display:none;text-align:center;margin:20px 0;color:#667eea}
        
        /* LOADING ANIMATION */
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}#loading{animation:pulse 1.5s ease-in-out infinite}
    </style>
</head>
<body>
    <!-- 9. NOSCRIPT PARA GTM E FALLBACK -->
    <noscript>
        <!-- Google Tag Manager (noscript) -->
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NTT7KD6G"
                height="0" width="0"
                style="display:none;visibility:hidden"
                title="Google Tag Manager"
                aria-hidden="true">
        </iframe>
        <!-- End Google Tag Manager (noscript) -->
        <style>.gate-container{animation:none}</style>
    </noscript>
    
    <!-- 10. CONTE√öDO PRINCIPAL -->
    <div class="gate-container" role="main">
        <h1 itemprop="headline">üéÅ Conhe√ßa o Ozoxx</h1>
        <p class="subtitle" itemprop="description">Preencha para acessar conte√∫do exclusivo</p>
        
        <form id="leadForm" aria-label="Formul√°rio de acesso exclusivo">
            <!-- Nome -->
            <div class="form-group">
                <input type="text" 
                       name="nome" 
                       placeholder="Seu nome completo" 
                       required 
                       aria-label="Nome completo"
                       autocomplete="name"
                       minlength="2"
                       aria-required="true">
            </div>
            
            <!-- Telefone -->
            <div class="form-group">
                <input type="tel" 
                       name="tel" 
                       id="phoneInput"
                       placeholder="(11) 99999-9999" 
                       required 
                       aria-label="N√∫mero de telefone"
                       autocomplete="tel"
                       pattern="^\([1-9]{2}\) 9[0-9]{4}-[0-9]{4}$"
                       title="Digite um telefone v√°lido com DDD: (11) 99999-9999"
                       maxlength="15"
                       aria-required="true">
            </div>
            
            <!-- Email -->
            <div class="form-group">
                <input type="email" 
                       name="email" 
                       placeholder="seu@email.com" 
                       required
                       aria-label="Endere√ßo de email"
                       autocomplete="email"
                       pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                       title="Digite um email v√°lido: exemplo@gmail.com"
                       maxlength="100"
                       aria-required="true">
            </div>
            
            <button type="submit" id="submitBtn" aria-label="Enviar formul√°rio para acessar conte√∫do exclusivo">
                üëâ Acessar Conte√∫do Exclusivo
            </button>
            
            <div id="loading" role="alert" aria-live="polite">Processando...</div>
            <div id="errorMsg" role="alert" aria-live="assertive"></div>
        </form>
        
        <p class="privacy" itemprop="disambiguatingDescription">
            üîí Seus dados est√£o protegidos. Ao enviar, voc√™ concorda com nossa pol√≠tica de privacidade.
        </p>
    </div>

    <!-- 11. JAVASCRIPT OTIMIZADO COM GTM INTEGRATION -->
    <script>
    !function(){'use strict';
    // ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è ALTERE ESTA URL PARA A DO SEU GOOGLE APPS SCRIPT ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è
    const API_URL='https://script.google.com/macros/s/AKfycbyVxcQuPmxshpZmigu-LDTTLF3dZGGdWFdLYbxdqgusW1XDDbl8jHN5GNzlVaMsfj8J/exec';
    const REDIRECT_URL='https://ozoxxvenda.github.io/ozoxxterapia/home.html';
    
    // Initialize DataLayer if not exists
    window.dataLayer = window.dataLayer || [];
    
    function init(){
        const f=document.getElementById('leadForm'),p=document.getElementById('phoneInput');
        if(!f)return;
        
        // Formata√ß√£o telefone
        p&&p.addEventListener('input',function(e){
            let v=e.target.value.replace(/\D/g,'');
            v.length>11&&(v=v.substring(0,11));
            if(v.length>0){
                v='('+v;
                v.length>3&&(v=v.substring(0,3)+') '+v.substring(3));
                v.length>10&&(v=v.substring(0,10)+'-'+v.substring(10));
            }
            e.target.value=v;
        });
        
        // Envio formul√°rio
        f.addEventListener('submit',async function(e){
            e.preventDefault();
            const b=this.querySelector('button[type="submit"]');
            if(!b)return;
            
            // Validar antes de enviar
            if(!this.checkValidity()){
                this.reportValidity();
                return;
            }
            
            // Disparar evento GTM de in√≠cio (antes do envio)
            try{
                window.dataLayer.push({
                    'event': 'formSubmissionStarted',
                    'formType': 'leadCapture',
                    'formName': 'Ozoxx Access',
                    'timestamp': new Date().toISOString()
                });
            }catch(e){console.log('GTM event error:',e)}
            
            b.disabled=true;
            b.textContent='Enviando...';
            b.setAttribute('aria-label', 'Enviando dados, por favor aguarde');
            const l=document.getElementById('loading');
            l&&(l.style.display='block');
            
            try{
                const d={
                    nome:this.nome.value.trim(),
                    email:this.email.value.trim(),
                    tel:this.tel.value.trim(),
                    source: window.location.href,
                    timestamp: new Date().toISOString()
                };
                
                console.log('Enviando:',d);
                
                // Timeout para evitar travamento
                const timeoutPromise = new Promise((_, reject) => 
                    setTimeout(() => reject(new Error('Timeout')), 10000)
                );
                
                const fetchPromise = fetch(API_URL,{
                    method:'POST',
                    headers:{'Content-Type':'application/x-www-form-urlencoded'},
                    body:new URLSearchParams(d).toString()
                });
                
                const r=await Promise.race([fetchPromise, timeoutPromise]);
                const j=await r.json();
                console.log('Resposta:',j);
                
                if(j.success){
                    // Disparar evento GTM de sucesso
                    try{
                        window.dataLayer.push({
                            'event': 'formSubmissionSuccess',
                            'formType': 'leadCapture',
                            'formName': 'Ozoxx Access',
                            'leadData': {
                                'hasName': !!d.nome,
                                'hasEmail': !!d.email,
                                'hasPhone': !!d.tel
                            },
                            'timestamp': new Date().toISOString()
                        });
                    }catch(e){console.log('GTM success event error:',e)}
                    
                    // Salvar localmente
                    localStorage.setItem('ozoxx_done','true');
                    localStorage.setItem('ozoxx_submit_time', new Date().toISOString());
                    
                    // Redirecionar com delay otimizado
                    setTimeout(()=>{
                        window.location.href=REDIRECT_URL;
                    }, 300); // Reduzido para melhor UX
                    
                }else{
                    throw new Error(j.message||'Erro no servidor');
                }
                
            }catch(err){
                console.error('Erro:',err);
                
                // Disparar evento GTM de erro
                try{
                    window.dataLayer.push({
                        'event': 'formSubmissionError',
                        'formType': 'leadCapture',
                        'errorType': err.name,
                        'errorMessage': err.message.substring(0, 100),
                        'timestamp': new Date().toISOString()
                    });
                }catch(e){console.log('GTM error event error:',e)}
                
                b.disabled=false;
                b.textContent='üëâ Acessar Conte√∫do Exclusivo';
                b.setAttribute('aria-label', 'Tentar novamente - acessar conte√∫do exclusivo');
                l&&(l.style.display='none');
                showError(err.name==='TypeError'?'Erro de conex√£o. Verifique sua internet.':'Erro: '+err.message);
            }
        });
        
        // Track form interactions
        f.querySelectorAll('input').forEach(input => {
            input.addEventListener('focus', function() {
                try{
                    window.dataLayer.push({
                        'event': 'formFieldFocus',
                        'fieldName': this.name,
                        'formType': 'leadCapture'
                    });
                }catch(e){}
            });
        });
    }
    
    function showError(m){
        let e=document.getElementById('errorMsg');
        e||(e=document.createElement('div'),e.id='errorMsg',e.style.cssText='color:#d00;padding:12px;margin-top:15px;border:1px solid #fcc;background:#fee;border-radius:6px;',document.querySelector('.gate-container').appendChild(e));
        e.textContent='‚ùå '+m;
        e.style.display='block';
        setTimeout(()=>e.style.display='none',5000);
    }
    
    // Load GTM on user interaction (backup strategy)
    document.addEventListener('DOMContentLoaded', function() {
        init();
        
        // Trigger GTM load on first interaction as backup
        ['click', 'touchstart', 'keydown'].forEach(event => {
            document.addEventListener(event, function loadGTMOnInteraction() {
                if(window.dataLayer && typeof window.dataLayer.push === 'function') {
                    try{
                        window.dataLayer.push({
                            'event': 'firstUserInteraction',
                            'interactionType': event
                        });
                    }catch(e){}
                }
                document.removeEventListener(event, loadGTMOnInteraction);
            }, { once: true, passive: true });
        });
    });
    
    // Web Vitals Monitoring (Lightweight)
    if('PerformanceObserver' in window) {
        try{
            const po = new PerformanceObserver((list) => {
                for(const entry of list.getEntries()) {
                    if(entry.entryType === 'largest-contentful-paint') {
                        console.log('LCP:', entry.startTime);
                    }
                }
            });
            po.observe({entryTypes: ['largest-contentful-paint']});
        }catch(e){}
    }
    
    }();
    </script>
</body>
</html>
